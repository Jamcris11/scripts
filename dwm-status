#!/usr/bin/env bash
# Copyright (c) 2025 Jim - jim@jimscorner.co.uk
# /

VOLPER=$(awk -F"[][]" '/Left:/ { print $2 }' <(amixer -D pulse get Master) | grep -o [0-9]*)
MUTE=$(awk -F"[][]" '/Left:/ { print $4 }' <(amixer -D pulse get Master) )

if [ "$MUTE" = "off" ] ; then
	VOL=" 0%"
elif [ "$VOLPER" -eq 0 ] ; then
	VOL=" $VOLPER%"
elif [ "$VOLPER" -lt 50 ] ; then
	VOL=" $VOLPER%"
elif [ "$VOLPER" -lt 90 ] ; then
	VOL=" $VOLPER%"
else
	VOL="!$VOLPER%"
fi

HDD=$(df -h | grep sda3 | awk '{print $4}')
RAM=$(free -h | grep Mem: | awk '{ print $3 }')
TIME=$(date '+%I:%M %p')
DATE=$(date '+%b %e')

dwm -s " $VOL | $HDD | $RAM | $DATE | $TIME "
